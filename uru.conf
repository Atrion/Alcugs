###############################################################################
#      Sample Uru Server Configuration file                                   #
###############################################################################
# $Id$                        #
###############################################################################
#
# Important!, some features are unimplemented, others may work or not, and 
# others may cause unstability.
# Warning: This file contains passwords, so remember to make it only readable
# by the user uru.
#
# $ chown uru.uru
# $ chmod 400
#
# remember that the LAST entry overrides the previous one for example,
# if you put:
#  port = 4764
#
# and then lately you put:
# read_config = myconfig.txt
#
# and if this new file contains the directive "port" then the value will be 
# overrided by the last one.
#
# The syntax, is very simple: variable = "string text" or variable = 1284
# NOTE: Commented text starts with the characters '#' and/or ';'
############# Global Settings #################################################
[global]
# set the logging/verbose level (you can also set it as parameter [-v n])
# 3-> print all messages to the stdout (default)
# 2-> print only informative and error messages
# 1-> print only error messages
# 0-> total silence, perfect for daemon mode
;verbose_level = 3 #default 3

# set daemon mode (default 0) (parameter: [-D])
;daemon = 1 #default 1

# sets the bandwidth in kbps. This speed is anounced to the clients
# and used to compute how fast the server sends the messages.
;bandwidth = 128

# sets the default global bind address (for all servers)
bind = pegasus.aml.loc #default 0.0.0.0

private_network = 172.26.0.0
private_mask    = 255.255.255.0
public_address  = uru2.almlys.dyns.net

#Set the displayed website, when the user logs into your shard.
website = "http://huru.almlys.dyns.net/"

#proposed for the future *Not implemented yet!*
# websiste = "http://huru.almlys.dyns.net/?login=%u"
# where %u will be replaced by the login, and then, you will
# be able to make more customized the shard page.

#paths
;bin = ./
#for windoze
;bin = "Y:/disk2/b/ururelive/server/devel/urunet3/src/"
sdl = share/sdl.uu/
age = share/age.uu/
# This are for server side python scripts, 
# (client and/or plasma python scripts don't work here)
python = python/
# Not yet, implemented, but if you are going to run a data server node
#  this will be where all new content will be cached/mirrored/stored.
;data = ./data/
;data.mirror = "7,8" # Set which content we want to mirror. 
# (It's a coma separated list)

#dataset
dataset = 3
#### datasets info ####
# -1 = undefined
#  0 = custom
#  1 = prime
#  2 = prime+patch12
#  3 = untìl uru/live (Build 37)
#  4 = todni (Exp1 Branch)
#  5 = tpots (Main Branch)
#  6 = Alcugs stable Client patch distro for tpots
#  7 = Alcugs testing Client patch distro for tpots
#  8 = Open Hacking shard (any client can be used)
# >9 = Send a mail to Almlys, and we can discuss about
#      creating new worlds incompatible with the other
#      datasets. Remember, that clients that wish to
#      use different datasets, must have a different
#      separate installation for each dataset.

# Enforce that the user is really using this dataset?
#  UruSetup login will be dissabled, and user must use
#  an authorized alcugs client for that dataset.
#  Also you must be running a data server node to be
#  able to perform the dataset verification.
;dataset.enforce = 1 #(default 1)

#dump raw messages to disk (vault imports also)
net.dumps = 1

#user defined port range (default and recomened 5000-6000)
;spawn.start = 5000
;spawn.stop = 6000

# dissable net.auth (net.auth implementation not finished,
# so please, set always 0 for now...)
net.auth = 0 #default 1

# flooding protection
net.noflood = 1 #default 1

# oldprotocol, only for clients (depreceated)
;auth.oldprotocol = 1
;vault.oldprotocol = 1
# arhg, I think that the tracking server will explode if you put
# oldprotocol = 0, (you have been warned)
tracking.oldprotocol = 1

# ** auth settings **
# Set minimal access level to be able to log into the servers.
;auth.minalevel = 25 # default 25
# Set default access level for new users, set it bigger than auth.minalevel
# to deny the access to the shard. (for a private shard)
;default_access_level = 15
# More info about the Access Levels
#
#

# Set number of failed login attempts after temporany dissabling an account.
;auth.att = 6
#Set the tmp time in seconds that the dissabled account will stay dissabled
;auth.distime = 300

# ** global database settings **
# set the database tiemout (default 450 seconds)
;db.timeout = 450 #default 450 seconds
#enable persistent connection to the database, default 1 (1=enabled/0=disabled)
;db.persistent = 1 #default 1
# enable sql logging (default 1) requires "db.log = 1" to work
;db.sql.log = 1 #default 1
# enable logging of the database driver (default 1)
;db.log = 1 #default 1

## Metaserver settings
meta = 0 # 1=metaserver enabled, 0=disabled (default 0)

## Information anounced to the metaserver global public list
## if metaserver is enabled
# Your shard name
shard.name = "My Alcugs shard"
# Password, that is required to be able to manually delete
#  your shard from the public list.
shard.passwd = "123"
# Description of your shard.
shard.desc = "An Alcugs shard, like any other one"
# Your Shard Home Page
shard.website = "http://alcugs.almlys.dyns.net"
# Contact address (an E-mail address, or a URL to a place where
#  the admin can be contacted)
shard.contact = "foo@bar"
# Note, your shard will be anounced with the specific datasets,
#  it will be listed in the global list.
#  Also, Alcugs clients will show only shards of the client
#  configured datased.

# quick cheaters out of the server?
cheating = 1 # 0 dissables the anti-cheating code
cheating.strikes = 3
cheating.strikefactor = 1
cheating.time = 3
cheating.multiplier = 30
# 1st strike 90 seconds, 2nd strike 45 minutes, 3rd strike banned forever.

# The next ages, will be private. (Also, at current time personal, must be a 
#  private age)
;private_ages = "AvatarCustomization,Personal,Nexus,BahroCave"

# Completely debbuging options, that should not be used in a production shard.
;instance_mode = 0
#Let's remember, 0,1,2, I don't remember what those values did. *looks sources*
# hmmmm, hmmmmmm, ah!, I got it. 0=all ages are public, 1=only ages listed on 
# private_ages will be private, and, aha, 2=old schema.
load_on_demand = 0
#Let's remember, load_on_demand 1=spawn game server on demand, 0=ignore fork requests.
# "./start.sh Personal myguid" may be useful.

# If you don't want to burn your hardrive, please, be sure that your 
#  /tmp mount point, is a RAM device. (shm, I think..)
# If your are on windows, then it's time to trash your old OS and upgdrade to a better one.
# Yep, it's in the TODO list an http service, so, you can request the status without trashing
#  your hardrive.
# UruVision
track.xml = 1 # Enable UruVision compatible xml output (default 1)
track.xml.path = "/tmp/alcugs/test/status.xml"

# Online Players Html files (old)
track.html = 1 # Enable standard online players html output (default 1)
track.html.path = "/tmp/alcugs/test/status.html"

track.htmldbg = 1 # Enable the same file, but with all the available debug input (default 1)
track.htmldbg.path = "/tmp/alcugs/test/statusdbg.html"

# You can dissable the html files, and use an xml parser to show in your website, only the
# information that you whan to display.

# Experimental, when it's safe, I will update this.
# It only works on Linux, there aren't any plans for Windoze support, and currently it's hardcoded to use
# the sendmail bin. (I will work later in making it more customizable)
admin.reports = 0
admin.email = "root@localhost"

# Python Interface - Modules
#python.adminKI = "xAdmin"


#There is a stop var for each server section, remove them to check that you
# have already read and understood how this configuration file works.
# stop = 1

############# Auth Server Settings #############################################
[auth]
bind = 172.26.0.19
port = 2010
log_files_path = log/auth/

#database settings
#db.host = "localhost"
#note: set db_server to nothing to use the local unix socket
db.name = "uru_auth_db"
db.username = "uru"
db.passwd = "auth_db_password"

stop = 0

#auth databes (on Matrix mysql server)
# db.name = "uru_auth"
# Main auth database
# db.name = "uru_auth_test"
# Auth database in unet2 format (keeping it for testing upgrade code)
 db.name = "uru_auth_testing22"
# A database where my access level is 0

#auth databases (on Pegasus mysql server)
db.name = "uru_auth_tst"

############# Tracking Server Settings #########################################
[tracking]
bind = 172.26.0.19
port = 2011
log_files_path = log/tracking/

stop = 0

############# Vault Server Settings ############################################
[vault]
bind = 172.26.0.19
port = 2012
log_files_path = log/vault/

#database settings
#db.host = "matrix"
#note: set db.host to nothing to use the local unix socket
db.name = "uru_vault_db"
db.username = "uru"
db.passwd = "vault_db_passwd"

#vaults (on Matrix)
# new tpots database
# db_name = "uru_vault_test69"
# tpots database 2 users admin & test
# db_name = "uru_vault_test"
# tpots database 2 users admin & test
# db_name = "uru_vault_foo_test"
# another tpots vault
# db_name = "uru_vault_foo_test73"
# GoE shard mirror vault (remember to change the folder!!!!)
# db_name = "uru_vault_test_prod"
# uu only vault
# db_name = "uru_vault_testing"

# New test vault - for pure UU clients
db_name = "uru_vault_new_testA"

# Vaults (on Pegasus)
db_name = "uru_vault_tst"

# Assigned name to new hoods
vault.hood.name = "Foo"
vault.hood.desc = "Foo's party hood"

stop = 0

############ Lobby Server Settings #############################################
[lobby]
bind = 172.26.0.19
port = 5000
log_files_path = log/lobby/
game.log = log/game/
#game.config = olduru.conf

#stop = 1

############ Game Server Settings ##############################################
[game]
#never use the port directive inside the game key, or all spawned game servers will attempt
# to use the port configured here!!!!
# The same applies with the log_files_path
# best to don't put nothing here, only _netcore_ only related options.

############ Data Server Settings #############################################
[data]
# Under extreme testing... and under extreme development...
# This will be used to 
# * Verify that everybody runs exactly the same client.
# * Easy and automated way to distribute updates/patches and new content.
# * And everything is cryptographically protected by public/private key pairs.
stop = 1

############ Meta Server Settings #############################################
[meta]
# I will explain later, basically I changed the metaserver architecture,
#  and now, if you run a shard with a dataserver node, you can also run a
#  metaserver. (well, I think that you must run a metaserver (you need to know
#   where are the other peers, no?))
stop = 1

read_config ".private.conf"

